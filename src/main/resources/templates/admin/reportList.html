<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ì‹ ê³  ë‚´ì—­</title>

    <link rel="icon" th:href="@{/images/recoder.png}">
    <link rel="stylesheet" th:href="@{/css/index.css?ver=1}">
    <link rel="stylesheet" th:href="@{/css/adminlist.css?ver=1}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/custom.css?ver=1}">
</head>

<body>
<header th:replace="~{fragment/header :: header}"></header>

<table class="report-List">
    <caption>ì‹ ê³  ë‚´ì—­</caption>
    <tr>
        <th>ì‹ ê³ ì</th>
        <th>ì‹ ê³  ì£¼ì°¨ì¥</th>
        <th>ìœ„ë°˜ ì°¨ëŸ‰</th>
        <th>ì‹ ê³  ì‚¬ìœ </th>
        <th>ì‹ ê³  ì¼ì</th>
        <th>ì²˜ë¦¬ ê²°ê³¼</th>
        <th>ì¶œë™ ì•Œë¦¼</th>
        <th>í™•ì¸</th>
    </tr>

    <tr style="cursor:pointer;" th:each="collect : ${collect}"
        th:if="${collect!=null}">
        <td th:text="${collect.user}"></td>
        <td th:text="${collect.college}"></td>
        <td th:text="${collect.carNumber}"></td>
        <td th:text="${collect.cause}"></td>
        <td th:text="${collect.reportDate}"></td>
        <td th:text="${collect.status.getDescription()}"></td>
        <td>
            <a class="w-btn-outline" href="#" th:href="'javascript:notification()'"
               th:if="${#strings.equals(collect.status.getDescription(),'ì²˜ë¦¬ í•„ìš”')}">ğŸš¨</a>
        </td>
        <td>
            <a class="g-btn-outline" href="#" th:href="'javascript:reportControl('+${collect.id}+')'"
               th:if="${#strings.equals(collect.status.getDescription(),'ì²˜ë¦¬ í•„ìš”')}">í™•ì¸</a>
        </td>
    </tr>

</table>
</body>

<script>
    function notification() {
        var form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "/send");
        document.body.appendChild(form);
        form.submit();
        setTimeout(function () {
            window.location.href = '/admin/report/list';
        }, 1); // 0.001 í›„ ìë°” ìŠ¤í¬ë¦½íŠ¸ ë¦¬ë””ë ‰ì…˜
    }
</script>
<script>
    function reportControl(report_id) {
        var form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "/admin/report/" + report_id + "/control");
        document.body.appendChild(form);
        form.submit();
    }
</script>

</html>